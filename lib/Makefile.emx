# Makefile for GNU m4 library.
# Copyright (C) 1992 Free Software Foundation, Inc.

.SUFFIXES: .c $O

.c$O:
	$(CC) -c $(CFLAGS) -I. -I.. $<

OBJECTS = obstack$O getopt$O getopt1$O error$O xmalloc$O xstrdup$O
REGEX = regex$O

m4.a: $(OBJECTS) $(REGEX)
	$(AR) cru $@ $(OBJECTS) $(REGEX)
	$(RANLIB) $@

m4.lib: $(OBJECTS)
	$(AR) cru $@ $(OBJECTS)
	$(RANLIB) $@

regex.a: gnuregex.dll
	makelib gnuregex.dll -o $@

regex.lib: gnuregex.def gnuregex.dll
	emximp -o libregex.imp gnuregex.def
	emximp -o $@ libregex.imp
	rm -f libregex.imp

gnuregex.dll: $(REGEX) gnuregex.def
	$(CC) -Zdll -o $@ $(REGEX) gnuregex.def
